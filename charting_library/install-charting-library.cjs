var fs=require("fs"),path=require("path");const md5File=require("md5-file"),http=require("https");var extract=require("extract-zip");function getMD5Digest(e){return md5File.sync(e).toUpperCase()}var outputFileName="charting_library.17.025.02b61a1c.zip",outputFilePath=path.join(__dirname,outputFileName);if(fs.existsSync(outputFilePath))checkDigest();else{const e=fs.createWriteStream(outputFilePath);http.get("https://explorer.bitshares.ws/"+outputFileName,(t=>{t.pipe(e)})).on("error",(e=>{throw console.error("Failed to download charting_library archive"),console.error(e),e})),e.on("finish",(()=>{checkDigest()}))}function checkDigest(){const e=getMD5Digest(outputFilePath),t=fs.readFileSync(outputFilePath+".md5").toString().trim();if(e!==t)throw fs.unlinkSync(outputFilePath),new Error("MD5 of downloaded file ("+e+") not matches expected ("+t+")");console.log("MD5 digest validated, extracting library..."),extract(outputFilePath,{dir:__dirname},(function(e){e&&console.error("Decompress error!",e)}))}