"use strict";(this.webpackChunkBitShares2_light=this.webpackChunkBitShares2_light||[]).push([[214],{22919:(e,t,a)=>{a.r(t),a.d(t,{default:()=>B});var n=a(67294),s=a(89449),r=a(112),l=a.n(r),o=a(76660),i=a(70981),c=a(38715),m=a(21019),d=a(3841),p=a(30381),h=a.n(p),u=a(13973),g=a(35075),b=a(32793),_=a(58684),E=a(74366),f=a(30806),k=a(98485),y=a(554),v=a(58074),x=a.n(v),w=a(73556),C=a(81237),S=a(31972),A=a(774);const Z=()=>new E.xR({amount:0,asset_id:"1.3.0"});class N extends n.Component{constructor(e){super(),this.state={info:null,filterValue:null,showModal:!1,amount:null,balanceError:!1,maxAmount:!1,feeAmount:Z(),mortgageAmount:0,rateAmount:0},this.showAcceptModal=this.showAcceptModal.bind(this),this.hideAcceptModal=this.hideAcceptModal.bind(this),this._handleFilterInput=this._handleFilterInput.bind(this),this._checkBalance=this._checkBalance.bind(this)}componentDidMount(){g.ZP.getAll({flag:"first"})}_checkBalance(){const{currentAccount:e}=this.props,t=f.ChainStore.getAccount(e),{feeAmount:a,mortgageAmount:n,selectAsset:s}=this.state;if(!s||!t)return;const r=t.getIn(["balances",s.get("id")]),l=t.getIn(["balances",a.asset_id]);if(!r)return this.setState({balanceError:!0});let o=f.ChainStore.getObject(r),i=l?f.ChainStore.getObject(l):null;if(i&&0!==i.get("balance")||this.setState({feeAmount:Z()}),!o||!a)return;if(!n)return this.setState({balanceError:!1});let c=new E.xR({asset_id:s.get("id"),amount:n,precision:s.get("precision")}).getAmount({real:!0});const m=(0,C.cr)(c,s,a,o);null!==m&&this.setState({balanceError:!m})}showAcceptModal(e){let{currentAccount:t}=this.props;if(f.ChainStore.getAccount(t).get("id")==e.owner_account)return void S.Z.addNotification.defer({children:n.createElement(x(),{component:"span",content:"credit_offer.info_borrow_err"}),level:"error",autoDismiss:3});let a=e.acceptable_collateral.map((e=>e[0])),s=e.asset_type,r=a[0];"string"==typeof r&&(r=f.ChainStore.getAsset(r)),"string"==typeof s&&(s=f.ChainStore.getAsset(s)),this.setState({showModal:!0,assetList:a,selectAsset:r,debtAsset:s,currentBalance:e.current_balance,info:e})}hideAcceptModal(){this.setState({showModal:!1})}_handleFilterInput(e){this.setState({filterValue:e.target.value.toUpperCase()})}_sortByAmount(e,t,a,n){return u.Z.convert_satoshi_to_typed(e,f.ChainStore.getAsset(t))-u.Z.convert_satoshi_to_typed(a,f.ChainStore.getAsset(n))}_getColumns(){let{locale:e}=this.props;return"zh"===e&&(e="zh_CN"),[{title:"ID",dataIndex:"id"},{title:l().translate("credit_offer.asset"),dataIndex:"asset_type",render:e=>n.createElement(c.Z,{asset:e})},{title:l().translate("credit_offer.account"),dataIndex:"owner_account",render:e=>n.createElement(d.Z,{account:e})},{title:l().translate("credit_offer.total_amount"),dataIndex:"total_balance",align:"right",sorter:(e,t)=>this._sortByAmount(e.total_balance,e.asset_type,t.total_balance,t.asset_type),render:(e,t)=>n.createElement(m.Z,{amount:e,asset:t.asset_type,hide_asset:!0,trimZero:!0})},{title:l().translate("credit_offer.available_amount"),align:"right",dataIndex:"current_balance",sorter:(e,t)=>this._sortByAmount(e.current_balance,e.asset_type,t.current_balance,t.asset_type),render:(e,t)=>n.createElement(m.Z,{amount:e,asset:t.asset_type,hide_asset:!0,trimZero:!0})},{title:l().translate("credit_offer.min_borrow"),align:"right",dataIndex:"min_deal_amount",sorter:(e,t)=>this._sortByAmount(e.min_deal_amount,e.asset_type,t.min_deal_amount,t.asset_type),render:(e,t)=>n.createElement(m.Z,{amount:e,asset:t.asset_type,hide_asset:!0,trimZero:!0})},{title:l().translate("credit_offer.fee_rate"),align:"right",dataIndex:"fee_rate",sorter:(e,t)=>e.fee_rate-t.fee_rate,render:e=>`${u.Z.format_number(parseFloat(e)/parseFloat(g.d0)*100,2,!1)}%`},{title:l().translate("credit_offer.repay_period"),dataIndex:"max_duration_seconds",align:"right",sorter:(e,t)=>e.max_duration_seconds-t.max_duration_seconds,render:t=>(0,g.Dc)(t,e)},{title:l().translate("credit_offer.validity_period"),dataIndex:"auto_disable_time",render:e=>h().utc(e).local().format("YYYY-MM-DD HH:mm:ss")},{title:l().translate("credit_offer.mortgage_assets"),dataIndex:"acceptable_collateral",render:e=>e.map((e=>n.createElement("div",{key:e[0]},n.createElement(c.Z,{asset:e[0]}))))},{title:l().translate("credit_offer.borrow"),key:"action",render:(e,t)=>n.createElement("span",{style:{fontSize:20}},n.createElement(o.Tooltip,{title:l().translate("credit_offer.borrow")},n.createElement(o.Icon,{type:"dollar",style:{cursor:"pointer",marginRight:"20px"},onClick:()=>{this.showAcceptModal(t)}})))}]}_sortByAsset(){let{allList:e}=this.props,{filterValue:t}=this.state;return t?e.filter((e=>{let a=f.ChainStore.getAsset(e.asset_type)?.get("symbol");return a.includes(t.toUpperCase())})):e}_onSubmit(){let{selectAsset:e,mortgageAmount:t,info:a,debtAsset:n,amount:s}=this.state,{currentAccount:r}=this.props,l=f.ChainStore.getAccount(r);if(a.owner_account!==l.get("id")){let r={borrower:l.get("id"),offer_id:a.id,borrow_amount:new E.xR({asset_id:n.get("id"),real:s,precision:n.get("precision")}),collateral:new E.xR({asset_id:e.get("id"),amount:t,precision:e.get("precision")}),max_fee_rate:a.fee_rate,min_duration_seconds:a.max_duration_seconds};console.log("data: ",r),g.ZP.accept(r).then((()=>{this.hideAcceptModal()})).catch((e=>{console.error(e)}))}}_onAssetChange(e){this.setState({selectAsset:f.ChainStore.getAsset(e)},this._checkBalance)}_onAmountChanged({amount:e,asset:t}){if(!t)return;"object"!=typeof t&&(t=f.ChainStore.getAsset(t));let{info:a,selectAsset:n}=this.state;if(t&&a&&n){let s=a.acceptable_collateral.findIndex((e=>e[0]==n.get("id")));if(s<0)return;let r=a.acceptable_collateral[s][1].base,l=a.acceptable_collateral[s][1].quote,o=new E.xR({asset_id:r.asset_id,amount:r.amount,precision:f.ChainStore.getAsset(r.asset_id).get("precision")}),i=new E.xR({asset_id:l.asset_id,amount:l.amount,precision:f.ChainStore.getAsset(l.asset_id).get("precision")}),c=new E.tA({base:o,quote:i}),m=parseFloat(e)*c.toReal(!0);m=Number.isNaN(m)?0:Math.ceil(m);let d=new E.xR({asset_id:n.get("id"),real:m,precision:n.get("precision")}),p=new E.xR({asset_id:t.get("id"),real:e,precision:t.get("precision")}),h=parseFloat(p.getAmount())/a.total_balance,u=parseFloat(a.fee_rate)/g.d0*a.total_balance*h;this.setState({amount:e,error:null,maxAmount:!1,mortgageAmount:d.getAmount(),rateAmount:u},this._checkBalance)}}_setTotal(e){const{currentBalance:t}=this.state;if(e){let a=new E.xR({amount:t,asset_id:e.get("id"),precision:e.get("precision")});this.setState({maxAmount:!0,amount:a.getAmount({real:!0})},this._checkBalance)}}_onFeeChanged(e){e&&this.setState({feeAmount:e,error:null},this._checkBalance)}_renderAcceptModal(){let{selectAsset:e,assetList:t,debtAsset:a,amount:s,currentBalance:r,balanceError:i,feeAmount:c,info:d,mortgageAmount:p,rateAmount:h}=this.state;if(!a)return null;let{currentAccount:u}=this.props,b=f.ChainStore.getAccount(u),_=null,v=new E.xR({amount:d.min_deal_amount,asset_id:a.get("id"),precision:a.get("precision")}),C=v.clone(r),S=s<v.getAmount({real:!0}),A=C.getAmount({real:!0}),Z=s>A||A<=0;const N=!s||S||Z||!e||i;let B=Z?"has-error":"";return _=r&&r>0?n.createElement("span",null,n.createElement(x(),{component:"span",content:"credit_offer.current_balance"}),":"," ",n.createElement("span",{className:B,style:{borderBottom:"#A09F9F 1px dotted",cursor:"pointer"},onClick:this._setTotal.bind(this,a,c.getAmount({real:!0}),c.asset_id)},n.createElement(m.Z,{amount:r,asset:a.get("id"),trimZero:!0}))):n.createElement("span",null,n.createElement("span",{className:B},n.createElement(x(),{content:"transfer.errors.noFunds"}))),n.createElement(o.Modal,{wrapClassName:"modal--transaction-confirm",title:l().translate("credit_offer.borrow"),visible:this.state.showModal,id:"modal-repay",overlay:!0,onCancel:this.hideAcceptModal,footer:[n.createElement(o.Button,{key:"send",disabled:N,onClick:this._onSubmit.bind(this)},n.createElement(x(),{content:"wallet.submit"})),n.createElement(o.Button,{key:"Cancel",onClick:this.hideAcceptModal},n.createElement(x(),{content:"wallet.cancel"}))]},n.createElement("div",{className:"grid-block vertical no-overflow"},n.createElement(o.Form,{className:"full-width",layout:"vertical"},n.createElement(o.Form.Item,{label:l().translate("credit_offer.mortgage_assets"),colon:!1},n.createElement("div",{style:{textAlign:"right",width:"100%"}},n.createElement(y.Z,{selectStyle:{width:"100%"},value:e.get("symbol"),assets:t,onChange:this._onAssetChange.bind(this)}))),n.createElement(k.Z,{label:"credit_offer.borrow_amount",amount:s,asset:a.get("id"),display_balance:_,onChange:this._onAmountChanged.bind(this),allowNaN:!0}),n.createElement(o.Form.Item,{label:l().translate("credit_offer.repay_period"),labelCol:{span:8},wrapperCol:{span:16},colon:!1},n.createElement("div",{style:{textAlign:"right",width:"100%"}},(0,g.Dc)(d.max_duration_seconds,this.props.locale))),n.createElement(o.Form.Item,{label:l().translate("credit_offer.min_borrow"),labelCol:{span:8},wrapperCol:{span:16},colon:!1},n.createElement("div",{style:{textAlign:"right",width:"100%",color:S?"red":"#7ed321"}},n.createElement(m.Z,{amount:d.min_deal_amount,asset:d.asset_type,trimZero:!0}))),n.createElement(o.Form.Item,{label:l().translate("credit_offer.mortgage_assets"),labelCol:{span:8},wrapperCol:{span:16},colon:!1},n.createElement("div",{style:{textAlign:"right",width:"100%",color:i?"red":"#7ed321"}},n.createElement(m.Z,{amount:p,asset:e.get("id"),trimZero:!0}))),n.createElement(o.Form.Item,{label:l().translate("credit_offer.estimated_fee"),labelCol:{span:8},wrapperCol:{span:16},colon:!1},n.createElement("div",{style:{textAlign:"right",width:"100%",color:"#7ed321"}},n.createElement("span",null,n.createElement(m.Z,{amount:h,asset:a.get("id"),trimZero:!0}),` (${parseFloat(d.fee_rate)/g.d0*100}%)`))),n.createElement(w.Z,{account:b,transaction:{type:"credit_offer_accept"},onChange:this._onFeeChanged.bind(this)}))))}render(){let{filterValue:e}=this.state,t=this._sortByAsset();return n.createElement("div",{className:"grid-content app-tables no-padding"},n.createElement("div",{className:"content-block small-12"},n.createElement("div",{className:"generic-bordered-box",style:{margin:"20px"}},n.createElement("div",{className:"header-selector"},n.createElement("div",{className:"filter inline-block"},n.createElement(i.Z,{value:e,placeholder:l().translate("credit_offer.plh_input_asset_name"),onChange:this._handleFilterInput})))),n.createElement("div",{className:"generic-bordered-box",style:{marginBottom:"40px"}},n.createElement("div",{className:"grid-wrapper"},n.createElement(o.Table,{rowKey:"id",columns:this._getColumns(),dataSource:t,pagination:{hideOnSinglePage:!0,pageSize:10}}))),this._renderAcceptModal()))}}const B=N=(0,s.$)(N,{listenTo:()=>[b.Z,_.Z,A.Z],getProps:e=>({currentAccount:b.Z.getState().currentAccount,passwordAccount:b.Z.getState().passwordAccount,allList:_.Z.getState().allList,locale:A.Z.getState().currentLocale})})},36210:(e,t,a)=>{a.r(t),a.d(t,{default:()=>qe});var n=a(67294),s=a(112),r=a.n(s),l=a(43393),o=a.n(l),i=a(23037),c=a(82267),m=a(30806),d=a(21019),p=a(58074),h=a.n(p),u=a(80314),g=a(89449),b=a(55294),_=a(39014),E=a(94184),f=a.n(E),k=a(5977),y=a(76660),v=a(70981),x=a(13973);a(88464);class w extends n.Component{static propTypes={witness:i.Z.ChainAccount.isRequired};_onRowClick(e){e.preventDefault(),this.props.history.push(`/account/${this.props.witness.get("name")}`)}render(){let{witness:e,isCurrent:t,rank:a}=this.props,s=m.ChainStore.getWitnessById(this.props.witness.get("id"));if(!s)return null;s.get("total_votes");let r=s.get("last_aslot"),l={};l=this.props.most_recent-r>100?{borderLeft:"1px solid #FCAB53"}:{borderLeft:"1px solid #50D2C2"};let o=new Date(Date.now()-(this.props.most_recent-r)*m.ChainStore.getObject("2.0.0").getIn(["parameters","block_interval"])*1e3),i=t?"active-witness":"",c=s.get("total_missed"),p=f()("txtlabel",{success:c<=500},{info:c>500&&c<=1250},{warning:c>1250&&c<=2e3},{error:c>=200});return n.createElement("tr",{className:i,onClick:this._onRowClick.bind(this)},n.createElement("td",null,a),n.createElement("td",{style:l},e.get("name")),n.createElement("td",null,n.createElement(u.Z,{time:new Date(o)})),n.createElement("td",null,s.get("last_confirmed_block_num")),n.createElement("td",{className:p},c),n.createElement("td",null,n.createElement(d.Z,{amount:s.get("total_votes"),asset:"1.3.0",decimalOffset:5})))}}w=(0,c.Z)(w),w=(0,k.EN)(w);class C extends n.Component{static propTypes={witnesses:i.Z.ChainObjectsList.isRequired};constructor(){super(),this.state={sortBy:"rank",inverseSort:!0},this.handleBlockIdClick=this.handleBlockIdClick.bind(this)}_setSort(e){this.setState({sortBy:e,inverseSort:e===this.state.sortBy?!this.state.inverseSort:this.state.inverseSort})}handleBlockIdClick(e){return()=>{this.props.history.push(`/block/${e}`)}}render(){let{witnesses:e,current:t,cardView:a,witnessList:s}=this.props,{sortBy:r,inverseSort:l}=this.state,o=0,i={};e.filter((e=>!!e&&-1!==s.indexOf(e.get("id")))).sort(((e,t)=>{if(e&&t)return parseInt(t.get("total_votes"),10)-parseInt(e.get("total_votes"),10)})).forEach(((e,t)=>{if(e){let a=e.get("last_aslot");o<a&&(o=a),i[e.get("id")]=t+1}}));let c=[];e.length>0&&e[1]&&(c=e.filter((e=>{if(!e)return!1;let t=m.ChainStore.getObject(e.get("witness_account"));if(!t)return!1;if(!m.ChainStore.getWitnessById(t.get("id")))return!1;let a=t.get("name");return!!a&&-1!==a.indexOf(this.props.filter)})).map((e=>{const t=m.ChainStore.getObject(e.get("witness_account")),a=m.ChainStore.getWitnessById(t.get("id"));let n=a.get("last_aslot"),s=new Date(Date.now()-(this.props.current_aslot-n)*m.ChainStore.getObject("2.0.0").getIn(["parameters","block_interval"])*1e3);return{id:e.get("id"),key:t.get("name"),rank:i[e.get("id")],name:t.get("name"),signing_key:a.get("signing_key"),url:x.Z.sanitize(a.get("url")),lastConfirmedBlock:{id:a.get("last_confirmed_block_num"),timestamp:s.getTime()},blocksMissed:a.get("total_missed"),votes:a.get("total_votes")}})));const p=[{key:"#",title:"#",dataIndex:"rank",sorter:(e,t)=>e.rank>t.rank?1:e.rank<t.rank?-1:0},{key:"name",title:"NAME",dataIndex:"name",sorter:(e,t)=>e.name>t.name?1:e.name<t.name?-1:0},{key:"url",title:"URL",dataIndex:"url",align:"center",render:e=>n.createElement("div",{style:{width:"100%",textAlign:"center"}},e&&(e=>/(http|https):\/\/(\w+:{0,1}\w*)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%!\-\/]))?/.test(e))(e)&&(e=>n.createElement(y.Popover,{content:n.createElement("a",{href:e,target:"_blank",rel:"noopener noreferrer"},e),trigger:"hover"},n.createElement(y.Icon,{type:"link"})))(e)||null)},{key:"lastConfirmedBlock",title:"LAST CONFIRMED BLOCK",dataIndex:"lastConfirmedBlock",render:e=>n.createElement("span",null,n.createElement("a",{style:{display:"inline-block",minWidth:"100px"},href:"javascript:void(0)",onClick:this.handleBlockIdClick(e.id)},"#",Number(e.id).toLocaleString())," ",n.createElement(u.Z,{time:new Date(e.timestamp)})),sorter:(e,t)=>e.lastConfirmedBlock.timestamp>t.lastConfirmedBlock.timestamp?-1:e.lastConfirmedBlock.timestamp<t.lastConfirmedBlock.timestamp?1:0},{key:"blocksMissed",title:"BLOCKS MISSED",dataIndex:"blocksMissed",render:e=>{const t=f()("txtlabel",{success:e<=500},{info:e>500&&e<=1250},{warning:e>1250&&e<=2e3},{error:e>=200});return n.createElement("span",{className:t},e)},sorter:(e,t)=>e.blocksMissed>t.blocksMissed?1:e.blocksMissed<t.blocksMissed?-1:0},{key:"votes",title:"VOTES",dataIndex:"votes",render:e=>n.createElement(d.Z,{amount:e,asset:"1.3.0",decimalOffset:5}),sorter:(e,t)=>e.votes>t.votes?1:e.votes<t.votes?-1:0},{key:"key",title:"KEY",dataIndex:"signing_key",align:"center",render:e=>n.createElement("div",{style:{textAlign:"center",width:"100%"}},(e=>n.createElement(y.Popover,{content:n.createElement("span",null,e),trigger:"hover"},n.createElement(y.Icon,{type:"key"})))(e))}];return n.createElement(y.Table,{rowClassName:e=>e.id===t?"active-witness":"",columns:p,dataSource:c,pagination:!1})}}C=(0,c.Z)(C,{show_loader:!0}),C=(0,k.EN)(C);class S extends n.Component{static propTypes={globalObject:i.Z.ChainObject.isRequired,dynGlobalObject:i.Z.ChainObject.isRequired};static defaultProps={globalObject:"2.0.0",dynGlobalObject:"2.1.0"};constructor(e){super(e),this.state={filterWitness:e.filterWitness||"",cardView:e.cardView}}_onFilter(e){this.setState({filterWitness:e.target.value.toLowerCase()}),b.Z.changeViewSetting({filterWitness:e.target.value.toLowerCase()})}_toggleView(){b.Z.changeViewSetting({cardView:!this.state.cardView}),this.setState({cardView:!this.state.cardView})}render(){let{dynGlobalObject:e,globalObject:t}=this.props;e=e.toJS(),t=t.toJS();let a=m.ChainStore.getObject(e.current_witness),s=null;return a&&(s=m.ChainStore.getObject(a.get("witness_account"))),n.createElement("div",{className:"grid-block"},n.createElement("div",{className:"grid-block"},n.createElement("div",{className:"grid-block"},n.createElement("div",{className:"grid-content "},n.createElement("div",{className:"explore-witness--info"},n.createElement("table",null,n.createElement("thead",null,n.createElement("tr",null,n.createElement("th",null,n.createElement(h(),{content:"explorer.witnesses.current"})),n.createElement("th",null,n.createElement(h(),{content:"explorer.blocks.active_witnesses"})),n.createElement("th",null,n.createElement(h(),{content:"explorer.witnesses.participation"})),n.createElement("th",null,n.createElement(h(),{content:"explorer.witnesses.pay"})),n.createElement("th",null,n.createElement(h(),{content:"explorer.witnesses.budget"})),n.createElement("th",null,n.createElement(h(),{content:"explorer.witnesses.next_vote"})))),n.createElement("tbody",null,n.createElement("tr",null,n.createElement("td",null,s?s.get("name"):null),n.createElement("td",null,Object.keys(t.active_witnesses).length),n.createElement("td",null,e.participation,"%"),n.createElement("td",null,n.createElement(d.Z,{amount:t.parameters.witness_pay_per_block,asset:"1.3.0"})),n.createElement("td",null," ",n.createElement(d.Z,{amount:e.witness_budget,asset:"1.3.0"})),n.createElement("td",null," ",n.createElement(u.Z,{time:new Date(e.next_maintenance_time+"Z")})))))),n.createElement(v.Z,{placeholder:r().translate("explorer.witnesses.filter_by_name"),value:this.state.filterWitness,onChange:this._onFilter.bind(this),style:{width:"200px",marginBottom:"12px",marginTop:"4px"}}),n.createElement(C,{current_aslot:e.current_aslot,current:a?a.get("id"):null,witnesses:o().List(t.active_witnesses),witnessList:t.active_witnesses,filter:this.state.filterWitness,cardView:this.state.cardView})))))}}S=(0,c.Z)(S);class A extends n.Component{render(){return n.createElement(S,this.props)}}const Z=A=(0,g.$)(A,{listenTo:()=>[_.Z],getProps:()=>({cardView:_.Z.getState().viewSettings.get("cardView"),filterWitness:_.Z.getState().viewSettings.get("filterWitness")})});class N extends n.Component{static propTypes={committee_members:i.Z.ChainObjectsList.isRequired};constructor(){super()}render(){let{committee_members:e,membersList:t}=this.props,a=null,s={};e.filter((e=>!!e&&-1!==t.indexOf(e.get("id")))).forEach(((e,t)=>{e&&(s[e.get("id")]=t+1)})),e.length>0&&e[1]&&(a=e.filter((e=>{if(!e)return!1;let t=m.ChainStore.getObject(e.get("committee_member_account"));return!!t&&!!m.ChainStore.getCommitteeMemberById(t.get("id"))&&-1!==t.get("name").indexOf(this.props.filter||"")})).map((e=>{let t=m.ChainStore.getObject(e.get("committee_member_account")),a=m.ChainStore.getCommitteeMemberById(t.get("id"));return{key:e.get("id"),rank:s[e.get("id")],name:t.get("name"),votes:a.get("total_votes"),url:x.Z.sanitize(a.get("url"))}})));const r=[{key:"#",title:"#",dataIndex:"rank",sorter:(e,t)=>e.rank>t.rank?1:e.rank<t.rank?-1:0},{key:"name",title:"NAME",dataIndex:"name",sorter:(e,t)=>e.name>t.name?1:e.name<t.name?-1:0},{key:"votes",title:"VOTES",dataIndex:"votes",render:e=>n.createElement(d.Z,{amount:e,asset:"1.3.0",decimalOffset:5}),sorter:(e,t)=>e.votes>t.votes?1:e.votes<t.votes?-1:0},{key:"url",title:"WEBPAGE",dataIndex:"url",render:e=>n.createElement("a",{href:e,target:"_blank",rel:"noopener noreferrer"},e)}];return n.createElement(y.Table,{columns:r,dataSource:a,pagination:!1})}}N=(0,c.Z)(N,{show_loader:!0});class B extends n.Component{static propTypes={globalObject:i.Z.ChainObject.isRequired};static defaultProps={globalObject:"2.0.0"};constructor(e){super(e),this.state={filterCommitteeMember:e.filterCommitteeMember||""}}shouldComponentUpdate(e,t){return!o().is(e.globalObject,this.props.globalObject)||t.filterCommitteeMember!==this.state.filterCommitteeMember||t.cardView!==this.state.cardView}_onFilter(e){this.setState({filterCommitteeMember:e.target.value.toLowerCase()}),b.Z.changeViewSetting({filterCommitteeMember:e.target.value.toLowerCase()})}render(){let{globalObject:e}=this.props;e=e.toJS();let t=[];for(let a in e.active_committee_members)e.active_committee_members.hasOwnProperty(a)&&t.push(e.active_committee_members[a]);return n.createElement("div",{className:"grid-block"},n.createElement("div",{className:"grid-block vertical medium-horizontal"},n.createElement("div",{className:"grid-block vertical"},n.createElement("div",{className:"grid-content"},n.createElement(v.Z,{placeholder:r().translate("explorer.witnesses.filter_by_name"),value:this.state.filterCommitteeMember,onChange:this._onFilter.bind(this),style:{width:"200px",marginBottom:"12px",marginTop:"4px"}}),n.createElement(N,{filter:this.state.filterCommitteeMember,committee_members:o().List(e.active_committee_members),membersList:e.active_committee_members})))))}}B=(0,c.Z)(B);class O extends n.Component{render(){return n.createElement(B,this.props)}}const I=O=(0,g.$)(O,{listenTo:()=>[_.Z],getProps:()=>({cardView:_.Z.getState().viewSettings.get("cardViewCommittee"),filterCommitteeMember:_.Z.getState().viewSettings.get("filterCommitteeMember")})});var T=a(59851),j=a(21660),D=a(41220);const{operations:L}=m.ChainTypes;let F=Object.keys(L),M={general:[0,25,26,27,28,32,33,37,39,41,49,50,52,69,70,71,72,73],asset:[10,11,12,13,14,15,16,17,18,19,38,43,44,47,48],market:[1,2,3,4,45,46],account:[5,6,7,8,9],business:[20,21,22,23,24,29,30,31,34,35,36]},R=[5,7,20,21,34];class P extends n.Component{static propTypes={globalObject:i.Z.ChainObject.isRequired};static defaultProps={globalObject:"2.0.0"};constructor(e){super(e)}shouldComponentUpdate(e){return!o().is(e.globalObject,this.props.globalObject)}render(){let{globalObject:e,settings:t,opIds:a,title:s}=this.props;e=e.toJS();const l=m.ChainStore.getAsset("1.3.0");let o=e.parameters.current_fees,i=e.parameters.network_percent_of_fee/1e4,c=o.scale,p=o.parameters,u=t.get("fee_asset")||l.get("symbol"),g=r().translate("transaction.trxTypes"),b=a.map((e=>{let t=p.findIndex((t=>t[0]===e));if(-1===t)return void console.warn("Asking for non-existing fee id %d! Check group settings in Fees.jsx",e);let a=p[t],s=a[0],l=a[1],o=F[s],m=g[o],h=i;10===s&&(h=.5+.5*i);let b=[],_=!1,E=f()("label","info");for(let e in l){let a=l[e]*c/1e4,o=a*h,i=r().translate("transaction.feeTypes"),p=a?n.createElement(d.Z,{amount:a,asset:"1.3.0"}):i._none,g=a?n.createElement(D.il,{fromAsset:"1.3.0",fullPrecision:!0,amount:a,toAsset:u,fullDecimals:!0}):i._none,f=o?n.createElement(d.Z,{amount:o,asset:"1.3.0"}):i._none,k=o?n.createElement(D.il,{fromAsset:"1.3.0",fullPrecision:!0,amount:o,toAsset:u,fullDecimals:!0}):i._none,y=null;_||(_=!0,y=n.createElement("td",{rowSpan:"6",style:{width:"15em"}},n.createElement("span",{className:E},m))),R.indexOf(s)<0?"Annual Membership"!=i[e]&&b.push(n.createElement("tr",{key:s.toString()+e},y,n.createElement("td",null,i[e]),n.createElement("td",{style:{textAlign:"right"}},p,0!==a&&"BTS"!==u?n.createElement("span",null," / ",g):null),n.createElement("td",{style:{textAlign:"right"}},8!==t?f:null,8!==t&&0!==a&&"BTS"!==u?n.createElement("span",null," / ",k):null))):b.push(n.createElement("tr",{key:s.toString()+e},y,n.createElement("td",null,i[e]),n.createElement("td",{style:{textAlign:"right"}},"- ",n.createElement("sup",null,"*")),n.createElement("td",{style:{textAlign:"right"}},f,0!==a&&"BTS"!==u?n.createElement("span",null," / ",k):null)))}return n.createElement("tbody",{key:t},b)}));return n.createElement("div",{className:"asset-card"},n.createElement(y.Card,null,this.props.title.toUpperCase()),n.createElement("table",{className:"table"},n.createElement("thead",null,n.createElement("tr",null,n.createElement("th",null,n.createElement(h(),{content:"explorer.block.op"})),n.createElement("th",null,n.createElement(h(),{content:"explorer.fees.type"})),n.createElement("th",{style:{textAlign:"right"}},n.createElement(h(),{content:"explorer.fees.fee"})),n.createElement("th",{style:{textAlign:"right"}},n.createElement(h(),{content:"explorer.fees.feeltm"})))),b))}}P=(0,c.Z)(P);class U extends n.Component{render(){let e=r().translate("transaction.feeGroups"),t=[];for(let a in M){let s=e[a],r=M[a];t.push(n.createElement(P,{key:a,settings:this.props.settings,opIds:r,title:s}))}return n.createElement("div",{className:"grid-block vertical",style:{overflow:"visible"}},n.createElement("div",{className:"grid-block small-12 shrink",style:{overflow:"visible"}},n.createElement(j.Z,{path:"components/Fees"})),n.createElement("div",{className:"grid-block small-12 ",style:{overflow:"visible"}},n.createElement("div",{className:"grid-content"},t)))}}const z=U;class W extends n.Component{render(){return n.createElement(T.Z,{stores:[_.Z],inject:{settings:_.Z.getState().settings}},n.createElement(z,this.props))}}const V=W;var H=a(38216),q=a(73727),$=a(72034),G=a(62254),K=a(79060),J=a(19305),Y=a(52521),Q=a(10920),X=a.n(Q);class ee extends n.Component{shouldComponentUpdate(e){if(e.blocks.size<20)return!1;let t=this.refs.trx_chart?this.refs.trx_chart.chart:null;if(t&&e.blocks!==this.props.blocks){let{trxData:a,colors:n}=this._getData(e),s=t.series[0],r=s.xData[s.xData.length-1];if(s.xData.length)return a.forEach((e=>{e[0]>r&&s.addPoint(e,!1,s.xData.length>=30)})),t.options.plotOptions.column.colors=n,t.redraw(),!1}return e.blocks!==this.props.blocks||e.head_block!==this.props.head_block}_getData(e){let{blocks:t,head_block:a}=e,n=[],s=0;return n=t.filter((e=>e.id>=a-30)).sort(((e,t)=>e.id-t.id)).takeLast(30).map((e=>(s=Math.max(e.transactions.length,s),[e.id,e.transactions.length]))).toArray(),{colors:n.map((e=>e[1]<=5?"#50D2C2":e[1]<=10?"#A0D3E8":e[1]<=20?"#FCAB53":"#deb869")),trxData:n,max:s}}render(){let{trxData:e,colors:t,max:a}=this._getData(this.props),s=r().translate("explorer.blocks.transactions"),l={chart:{type:"column",backgroundColor:"rgba(255, 0, 0, 0)",spacing:[0,0,5,0],height:100},title:{text:null},credits:{enabled:!1},legend:{enabled:!1},rangeSelector:{enabled:!1},navigator:{enabled:!1},scrollbar:{enabled:!1},tooltip:{shared:!1,formatter:function(){return s+": "+this.y}},series:[{name:"Transactions",data:e,color:"#50D2C2"}],xAxis:{labels:{enabled:!1},title:{text:null}},yAxis:{min:0,max:Math.max(1.5,a+.5),title:{text:null},labels:{enabled:!1},gridLineWidth:0,currentPriceIndicator:{enabled:!1}},plotOptions:{column:{animation:!0,minPointLength:5,colorByPoint:!0,colors:t,borderWidth:0}}};return e.length?n.createElement(X(),{ref:"trx_chart",config:l}):null}}const te=ee;var ae=a(47855),ne=a(99651);class se extends n.Component{shouldComponentUpdate(e){if(e.blockTimes.length<19)return!1;if(0===this.props.blockTimes.length)return!0;let t=this.refs.chart?this.refs.chart.chart:null;if(t){let{blockTimes:a,colors:n}=this._getData(e),s=t.series[0],r=s.xData[s.xData.length-1];if(s.xData.length)return a.forEach((e=>{e[0]>r&&s.addPoint(e,!1,s.xData.length>=30)})),t.options.plotOptions.column.colors=n,t.redraw(),!1}return e.blockTimes[e.blockTimes.length-1][0]!==this.props.blockTimes[this.props.blockTimes.length-1][0]||e.blockTimes.length!==this.props.blockTimes.length}_getData(){let{blockTimes:e,head_block:t}=this.props;var a,n,s,r;e.filter((e=>e[0]>=t-30)),e&&e.length&&(n=30,e=(r=null==(a=e)?0:a.length)?(n=r-(n=s||void 0===n?1:(0,ne.Z)(n)),(0,ae.Z)(a,n<0?0:n,r)):[]);let l=e.map((e=>e[1]<=5?"#50D2C2":e[1]<=10?"#A0D3E8":e[1]<=20?"#FCAB53":"#deb869"));return{blockTimes:e,colors:l}}render(){let{blockTimes:e,colors:t}=this._getData(this.props),a=r().translate("explorer.blocks.block_time"),s={chart:{type:"column",backgroundColor:"rgba(255, 0, 0, 0)",spacing:[0,0,5,0],height:100},title:{text:null},credits:{enabled:!1},legend:{enabled:!1},rangeSelector:{enabled:!1},navigator:{enabled:!1},scrollbar:{enabled:!1},tooltip:{shared:!1,formatter:function(){return a+": "+this.y+"s"}},series:[{name:"Block time",data:e,color:"#50D2C2"}],xAxis:{labels:{enabled:!1},title:{text:null}},yAxis:{min:0,title:{text:null},labels:{enabled:!1},gridLineWidth:0,currentPriceIndicator:{enabled:!1}},plotOptions:{column:{animation:!0,minPointLength:3,colorByPoint:!0,colors:t,borderWidth:0}}};return e.length?n.createElement(X(),{ref:"chart",config:s}):null}}const re=se;var le=a(95891),oe=a.n(le),ie=a(35021);a(81705);class ce extends n.Component{shouldComponentUpdate(e){return e.blockTime!==this.props.blockTime}render(){let{blockTime:e}=this.props,t=(new Date).getTime()-new Date(e).getTime(),a=f()("txtlabel",{success:t<=6e3},{info:t>6e3&&t<=15e3},{warning:t>15e3&&t<=25e3},{error:t>25e3});return e?n.createElement("h3",{className:a},n.createElement(u.Z,{time:e})):null}}class me extends n.Component{static propTypes={globalObject:i.Z.ChainObject.isRequired,dynGlobalObject:i.Z.ChainObject.isRequired};static defaultProps={globalObject:"2.0.0",dynGlobalObject:"2.1.0",latestBlocks:{},assets:{},accounts:{},height:1};constructor(e){super(e),this.state={animateEnter:!1,operationsHeight:null,blocksHeight:null},this._updateHeight=this._updateHeight.bind(this)}_getBlock(e,t){e&&(e=parseInt(e,10),$.Z.getLatest(e,t))}UNSAFE_componentWillMount(){window.addEventListener("resize",this._updateHeight,{capture:!1,passive:!0})}componentWillUnmount(){window.removeEventListener("resize",this._updateHeight)}UNSAFE_componentWillReceiveProps(e){if(0===e.latestBlocks.size)return this._getInitialBlocks();this.state.animateEnter||this.setState({animateEnter:!0});let t=e.dynGlobalObject.get("head_block_number");return e.latestBlocks.size>=20&&e.dynGlobalObject.get("head_block_number")!==e.latestBlocks.get(0).id?this._getBlock(t,t):void 0}componentDidMount(){this._getInitialBlocks();let e=this.refs.operations;oe().initialize(e);let t=this.refs.blocks;oe().initialize(t),this._updateHeight()}shouldComponentUpdate(e,t){return!o().is(e.latestBlocks,this.props.latestBlocks)||!x.Z.are_equal_shallow(t,this.state)}componentDidUpdate(){this._updateHeight()}_getInitialBlocks(){let e=parseInt(this.props.dynGlobalObject.get("head_block_number"),10);if(e)for(let t=19;t>=0;t--){let a=!1;if(this.props.latestBlocks.size>0)for(let n=0;n<this.props.latestBlocks.size;n++)if(this.props.latestBlocks.get(n).id===e-t){a=!0;break}a||this._getBlock(e-t,e)}}_updateHeight(){let e=this.refs.outerWrapper.offsetHeight,t=this.refs.operationsText.offsetHeight,a=this.refs.blocksText.offsetHeight;this.setState({operationsHeight:e-t,blocksHeight:e-a},this.psUpdate)}psUpdate(){let e=this.refs.operations;oe().update(e);let t=this.refs.blocks;oe().update(t)}render(){let{latestBlocks:e,latestTransactions:t,globalObject:a,dynGlobalObject:s,coreAsset:r}=this.props,{blocksHeight:l,operationsHeight:o}=this.state;const i=this.props.getDynamicObject(r.get("dynamic_asset_data_id"));let c=null,m=null,p=null,u=0,g=e.size,b=0,_=[],E=0;if(e&&e.size>=20){let a,r,l;e.filter(((e,t)=>e.id===s.get("head_block_number")-t)).sort(((e,t)=>e.id-t.id)).forEach(((e,t)=>{u+=e.transactions.length,t>0?(_.push([e.id,(e.timestamp-a)/1e3]),r=e.timestamp):l=e.timestamp,a=e.timestamp})),c=e.sort(((e,t)=>t.id-e.id)).take(20).map((e=>n.createElement("tr",{key:e.id},n.createElement("td",null,n.createElement(q.rU,{to:`/block/${e.id}`},"#",x.Z.format_number(e.id,0))),n.createElement("td",null,n.createElement(G.Ji,{value:e.timestamp,format:"time"})),n.createElement("td",null,n.createElement(J.Z,{witness:e.witness})),n.createElement("td",null,x.Z.format_number(e.transactions.length,0))))).toArray();let o=0;m=t.sort(((e,t)=>t.block_num-e.block_num)).take(20).map((e=>{let t=0;return e.operations.map((a=>o>15?null:n.createElement(K.Z,{key:o++,op:a,result:e.operation_results[t++],block:e.block_num,hideFee:!0,hideOpLabel:!1,current:"1.2.0",hideDate:!0,hidePending:!0}))).filter((e=>!!e))})).toArray(),p=e.first().timestamp,E=_.reduce(((e,t,a,n)=>e+t[1]/n.length),0),b=u/((r-l)/1e3)}return n.createElement("div",{ref:"outerWrapper",className:"grid-block vertical"},n.createElement("div",{className:"align-center grid-block shrink small-horizontal blocks-row"},n.createElement("div",{className:"grid-block text-center small-6 medium-3"},n.createElement("div",{className:"grid-content no-overflow"},n.createElement("span",{className:"txtlabel"},n.createElement(h(),{component:"span",content:"explorer.blocks.current_block"})),n.createElement("h2",null,"#",x.Z.format_number(s.get("head_block_number"),0)))),n.createElement("div",{className:"grid-block text-center small-6 medium-3"},n.createElement("div",{className:"grid-content no-overflow"},n.createElement("span",{className:"txtlabel"},n.createElement(h(),{component:"span",content:"explorer.blocks.last_block"})),n.createElement(ce,{blockTime:p}))),n.createElement("div",{className:"grid-block text-center small-6 medium-3"},n.createElement("div",{className:"grid-content no-overflow"},n.createElement("span",{className:"txtlabel"},n.createElement(h(),{component:"span",content:"explorer.blocks.trx_per_sec"})),n.createElement("h2",null,x.Z.format_number(b,2)))),n.createElement("div",{className:"grid-block text-center small-6 medium-3"},n.createElement("div",{className:"grid-content no-overflow"},n.createElement("span",{className:"txtlabel"},n.createElement(h(),{component:"span",content:"explorer.blocks.avg_conf_time"})),n.createElement("h2",null,x.Z.format_number(E/2,2),"s")))),n.createElement("div",{className:"align-center grid-block shrink small-horizontal  blocks-row"},n.createElement("div",{className:"grid-block text-center small-6 medium-3"},n.createElement("div",{className:"grid-content no-overflow clear-fix"},n.createElement("span",{className:"txtlabel"},n.createElement(h(),{component:"span",content:"explorer.blocks.active_witnesses"})),n.createElement("h2",{className:"txtlabel success"},a.get("active_witnesses").size))),n.createElement("div",{className:"grid-block text-center small-6 medium-3"},n.createElement("div",{className:"grid-content no-overflow clear-fix"},n.createElement("span",{className:"txtlabel"},n.createElement(h(),{component:"span",content:"explorer.blocks.active_committee_members"})),n.createElement("h2",{className:"txtlabel success"},a.get("active_committee_members").size))),n.createElement("div",{className:"grid-block text-center small-6 medium-3"},n.createElement("div",{className:"grid-content no-overflow clear-fix"},n.createElement("span",{className:"txtlabel"},n.createElement(h(),{component:"span",content:"explorer.blocks.trx_per_block"})),n.createElement("h2",null,x.Z.format_number(u/g||0,2)))),n.createElement("div",{className:"grid-block text-center small-6 medium-3"},n.createElement("div",{className:"grid-content no-overflow clear-fix"},n.createElement("span",{className:"txtlabel"},n.createElement(h(),{component:"span",content:"explorer.blocks.recently_missed_blocks"})),n.createElement("h2",{className:"txtlabel warning",style:{fontWeight:"100"}},s.get("recently_missed_count"))))),n.createElement("div",{className:"align-center grid-block shrink small-vertical medium-horizontal blocks-row"},n.createElement("div",{className:"grid-block text-center small-12 medium-3"},n.createElement("div",{className:"grid-content no-overflow clear-fix"},n.createElement("span",{className:"txtlabel"},n.createElement(h(),{component:"span",content:"explorer.asset.summary.current_supply"})),n.createElement("h3",{className:"txtlabel"},i?n.createElement(d.Z,{amount:i.get("current_supply"),asset:r.get("id"),decimalOffset:5}):null))),n.createElement("div",{className:"grid-block text-center small-12 medium-3"},n.createElement("div",{className:"grid-content no-overflow"},n.createElement("div",{className:"txtlabel"},n.createElement(h(),{component:"span",content:"explorer.blocks.block_times"})),n.createElement(re,{blockTimes:_,head_block_number:s.get("head_block_number")}))),n.createElement("div",{className:"grid-block text-center small-12 medium-3"},n.createElement("div",{className:"grid-content no-overflow"},n.createElement("div",{className:"txtlabel"},n.createElement(h(),{component:"span",content:"explorer.blocks.trx_per_block"})),n.createElement(te,{blocks:e,head_block:s.get("head_block_number")}))),n.createElement("div",{className:"grid-block text-center small-12 medium-3"},n.createElement("div",{className:"grid-content no-overflow clear-fix"},n.createElement("span",{className:"txtlabel"},n.createElement(h(),{component:"span",content:"explorer.asset.summary.stealth_supply"})),n.createElement("h3",{className:"txtlabel"},i?n.createElement(d.Z,{amount:i.get("confidential_supply"),asset:r.get("id"),decimalOffset:5}):null)))),n.createElement("div",{ref:"transactionsBlock",className:"grid-block no-overflow"},n.createElement("div",{className:"grid-block small-12 medium-6 vertical no-overflow",style:{paddingBottom:0}},n.createElement("div",{className:"grid-block vertical no-overflow generic-bordered-box"},n.createElement("div",{ref:"operationsText"},n.createElement("div",{className:"block-content-header"},n.createElement(h(),{content:"account.recent"})),n.createElement("table",{className:"table fixed-height-2rem"},n.createElement("thead",null,n.createElement("tr",null,n.createElement("th",null,n.createElement(h(),{content:"account.votes.info"})))))),n.createElement("div",{className:"grid-block",style:{maxHeight:o||"400px",overflow:"hidden"},ref:"operations"},n.createElement("table",{className:"table fixed-height-2rem"},n.createElement("tbody",null,m))))),n.createElement("div",{className:"grid-block medium-6 show-for-medium vertical no-overflow",style:{paddingBottom:0,paddingLeft:5}},n.createElement("div",{className:"grid-block vertical no-overflow generic-bordered-box"},n.createElement("div",{ref:"blocksText"},n.createElement("div",{className:"block-content-header"},n.createElement(h(),{component:"span",content:"explorer.blocks.recent"}))),n.createElement("div",{className:"grid-block vertical",style:{maxHeight:l||"438px",overflow:"hidden"},ref:"blocks"},n.createElement("table",{className:"table fixed-height-2rem"},n.createElement("thead",null,n.createElement("tr",null,n.createElement("th",null,n.createElement(h(),{component:"span",content:"explorer.block.id"})),n.createElement("th",null,n.createElement(h(),{component:"span",content:"explorer.block.date"})),n.createElement("th",null,n.createElement(h(),{component:"span",content:"explorer.block.witness"})),n.createElement("th",null,n.createElement(h(),{component:"span",content:"explorer.block.count"})))),n.createElement(ie.Z,{component:"tbody",transitionName:"newrow"},c)))))))}}me=(0,c.Z)(me,{show_loader:!0});const de=me=(0,Y.Z)(me,{propNames:["coreAsset"],withDynamic:!0});class pe extends n.Component{render(){return n.createElement(T.Z,{stores:[H.Z],inject:{latestBlocks:()=>H.Z.getState().latestBlocks,latestTransactions:()=>H.Z.getState().latestTransactions}},n.createElement(de,null))}}const he=pe;var ue=a(89233),ge=a(45697),be=a.n(ge),_e=a(7453),Ee=a(3841),fe=a(7581),ke=a(99349),ye=a(19602),ve=a(55420),xe=a(38272);let we=(0,ye.ZP)("__graphene__");class Ce extends n.Component{constructor(e){super();let t=ve.Apis.instance().chain_id;t=t?t.substr(0,8):"4018d784",this.state={chainID:t,foundLast:!1,lastAsset:"",isLoading:!1,totalAssets:"object"!=typeof we.get(`totalAssets_${t}`)?we.get(`totalAssets_${t}`):t&&"4018d784"===t?3e3:50,assetsFetched:0,activeFilter:"market",filterSearch:e.filterSearch||"",rowsOnPage:"25"},this._toggleFilter=this._toggleFilter.bind(this),this.handleRowsChange=this.handleRowsChange.bind(this),this.handleFilterChange=this.handleFilterChange.bind(this)}shouldComponentUpdate(e,t){return!o().is(e.assets,this.props.assets)||!x.Z.are_equal_shallow(t,this.state)}UNSAFE_componentWillMount(){this._checkAssets(this.props.assets,!0)}handleFilterChange(e){this.setState({filterSearch:(e.target.value||"").toUpperCase()})}handleRowsChange(e){this.setState({rowsOnPage:e})}_checkAssets(e,t){this.setState({isLoading:!0});let a=e.sort(((e,t)=>e.symbol>t.symbol?1:e.symbol<t.symbol?-1:0)).last();0===e.size||t?(_e.Z.getAssetList.defer("A",100),this.setState({assetsFetched:100})):e.size>=this.state.assetsFetched&&(_e.Z.getAssetList.defer(a.symbol,100),this.setState({assetsFetched:this.state.assetsFetched+99})),e.size>this.state.totalAssets&&we.set(`totalAssets_${this.state.chainID}`,e.size),this.state.assetsFetched>=this.state.totalAssets-100&&this.setState({isLoading:!1})}UNSAFE_componentWillReceiveProps(e){e.assets!==this.props.assets&&this._checkAssets(e.assets)}linkToAccount(e){return e?n.createElement(Ee.Z,{account:e}):n.createElement("span",null,"-")}_toggleFilter(e){this.setState({activeFilter:e.target.value})}_onFilter(e,t){this.setState({[e]:t.target.value.toUpperCase()}),b.Z.changeViewSetting({[e]:t.target.value.toUpperCase()})}render(){let e,{assets:t}=this.props,{activeFilter:a}=this.state,s=(r().translate("markets.filter").toUpperCase(),m.ChainStore.getAsset("1.3.0")),l=[],o=[];return"user"==a&&(o=[{key:"symbol",title:"symbol",dataIndex:"symbol",defaultSortOrder:"ascend",sorter:(e,t)=>e.symbol>t.symbol?1:e.symbol<t.symbol?-1:0,render:e=>n.createElement(q.rU,{to:`/asset/${e}`},n.createElement(ke.Z,{name:e}))},{key:"issuer",title:"issuer",dataIndex:"issuer",sorter:(e,t)=>{let a=m.ChainStore.getAccount(e.issuer,!1),n=m.ChainStore.getAccount(t.issuer,!1);return a&&(a=a.get("name")),n&&(n=n.get("name")),a>n?1:a<n?-1:0},render:e=>this.linkToAccount(e)},{key:"currentSupply",title:"Supply",dataIndex:"currentSupply",sorter:(e,t)=>(e.currentSupply=parseFloat(e.currentSupply),t.currentSupply=parseFloat(t.currentSupply),e.currentSupply>t.currentSupply?1:e.currentSupply<t.currentSupply?-1:0),render:(e,t)=>n.createElement(d.Z,{amount:t.currentSupply,asset:t.assetId,hide_asset:!0})},{key:"marketId",title:"",dataIndex:"marketId",render:e=>n.createElement(q.rU,{to:`/market/${e}`},n.createElement(y.Icon,{type:"line-chart"})," ",n.createElement(h(),{content:"header.exchange"}))}],t.filter((e=>!e.market_asset&&-1!==e.symbol.indexOf(this.state.filterSearch))).map((e=>{let t=fe.Z.parseDescription(e.options.description),a=e.symbol+"_"+(t.market?t.market:s?s.get("symbol"):"BTS");l.push({symbol:e.symbol,issuer:e.issuer,currentSupply:e.dynamic.current_supply,assetId:e.id,marketId:a})}))),"market"==a&&(o=[{key:"symbol",title:"symbol",dataIndex:"symbol",defaultSortOrder:"ascend",sorter:(e,t)=>e.symbol>t.symbol?1:e.symbol<t.symbol?-1:0,render:e=>n.createElement(q.rU,{to:`/asset/${e}`},n.createElement(ke.Z,{name:e}))},{key:"issuer",title:"issuer",dataIndex:"issuer",sorter:(e,t)=>{let a=m.ChainStore.getAccount(e.issuer,!1),n=m.ChainStore.getAccount(t.issuer,!1);return a&&(a=a.get("name")),n&&(n=n.get("name")),a>n?1:a<n?-1:0},render:e=>this.linkToAccount(e)},{key:"currentSupply",title:"Supply",dataIndex:"currentSupply",sorter:(e,t)=>(e.currentSupply=parseFloat(e.currentSupply),t.currentSupply=parseFloat(t.currentSupply),e.currentSupply>t.currentSupply?1:e.currentSupply<t.currentSupply?-1:0),render:(e,t)=>n.createElement(d.Z,{amount:t.currentSupply,asset:t.assetId,hide_asset:!0})},{key:"marketId",title:"",dataIndex:"marketId",render:e=>n.createElement(q.rU,{to:`/market/${e}`},n.createElement(y.Icon,{type:"line-chart"})," ",n.createElement(h(),{content:"header.exchange"}))}],t.filter((e=>e.bitasset_data&&!e.bitasset_data.is_prediction_market&&-1!==e.symbol.indexOf(this.state.filterSearch))).map((e=>{let t=fe.Z.parseDescription(e.options.description),a=e.symbol+"_"+(t.market?t.market:s?s.get("symbol"):"BTS");l.push({symbol:e.symbol,issuer:e.issuer,currentSupply:e.dynamic.current_supply,assetId:e.id,marketId:a})}))),"prediction"==a&&(e=t.filter((e=>{let t=fe.Z.parseDescription(e.options.description);return e.bitasset_data&&e.bitasset_data.is_prediction_market&&(-1!==e.symbol.toLowerCase().indexOf(this.state.filterSearch.toLowerCase())||-1!==t.main.toLowerCase().indexOf(this.state.filterSearch.toLowerCase()))})).sort(((e,t)=>e.symbol<t.symbol?-1:e.symbol>t.symbol?1:0)).map((e=>{let t=fe.Z.parseDescription(e.options.description);return{asset:e,description:t,marketID:e.symbol+"_"+(t.market?t.market:s?s.get("symbol"):"BTS")}})).toArray()),n.createElement("div",{className:"grid-block vertical"},n.createElement("div",{className:"grid-block vertical"},n.createElement("div",{className:"grid-block main-content small-12 medium-10 medium-offset-1 main-content vertical"},n.createElement("div",{className:"generic-bordered-box"},n.createElement("div",{style:{textAlign:"left",marginBottom:"24px"}},n.createElement("span",{style:{display:"inline-block",width:"0px",marginTop:"2px",float:"left",fontSize:"18px"}},this.state.isLoading?n.createElement(y.Icon,{type:"loading"}):null),n.createElement(v.Z,{value:this.state.filterSearch,style:{width:"200px"},onChange:this.handleFilterChange}),n.createElement(y.Radio.Group,{value:this.state.activeFilter,onChange:this._toggleFilter,style:{marginBottom:"7px",marginLeft:"24px"}},n.createElement(y.Radio,{value:"market"},n.createElement(h(),{content:"explorer.assets.market"})),n.createElement(y.Radio,{value:"user"},n.createElement(h(),{content:"explorer.assets.user"})),n.createElement(y.Radio,{value:"prediction"},n.createElement(h(),{content:"explorer.assets.prediction"}))),n.createElement(y.Select,{style:{width:"150px",marginLeft:"24px"},value:this.state.rowsOnPage,onChange:this.handleRowsChange},n.createElement(y.Select.Option,{key:"10"},"10 rows"),n.createElement(y.Select.Option,{key:"25"},"25 rows"),n.createElement(y.Select.Option,{key:"50"},"50 rows"),n.createElement(y.Select.Option,{key:"100"},"100 rows"),n.createElement(y.Select.Option,{key:"200"},"200 rows"))),"prediction"==a?n.createElement(xe.Z,{style:{paddingBottom:20},size:"large",itemLayout:"horizontal",dataSource:e,renderItem:e=>n.createElement(xe.Z.Item,{key:e.asset.id.split(".")[2],actions:[n.createElement(q.rU,{className:"button outline",to:`/market/${e.marketID}`},n.createElement(h(),{content:"header.exchange"}))]},n.createElement(xe.Z.Item.Meta,{title:n.createElement("div",null,n.createElement("span",{style:{paddingTop:10,fontWeight:"bold"}},n.createElement(q.rU,{to:`/asset/${e.asset.symbol}`},n.createElement(ke.Z,{name:e.asset.symbol}))),e.description.condition?n.createElement("span",null," ","(",e.description.condition,")"):null),description:n.createElement("span",null,e.description?n.createElement("div",{style:{padding:"10px 20px 5px 0",lineHeight:"18px"}},e.description.main):null,n.createElement("span",{style:{padding:"0 20px 5px 0",lineHeight:"18px"}},n.createElement(Ee.Z,{account:e.asset.issuer}),n.createElement("span",null," ","-"," ",n.createElement(d.Z,{amount:e.asset.dynamic.current_supply,asset:e.asset.id})),e.description.expiry?n.createElement("span",null," ","-"," ",e.description.expiry):null))})),pagination:{position:"bottom",pageSize:6}}):n.createElement(y.Table,{style:{width:"100%",marginTop:"16px"},rowKey:"symbol",columns:o,dataSource:l})))))}}Ce.defaultProps={assets:{}},Ce.propTypes={assets:be().object.isRequired};const Se=Ce;class Ae extends n.Component{render(){return n.createElement(T.Z,{stores:[ue.Z,_.Z],inject:{assets:()=>ue.Z.getState().assets,filterMPA:()=>_.Z.getState().viewSettings.get("filterMPA"),filterUIA:()=>_.Z.getState().viewSettings.get("filterUIA")}},n.createElement(Se,null))}}const Ze=Ae;var Ne=a(32793),Be=a(99111),Oe=a(82050),Ie=a(91684),Te=a(44015),je=a(52531);class De extends n.Component{constructor(e){super(),this.state={searchTerm:e.searchTerm,isLoading:!1,rowsOnPage:"25"},this._searchAccounts=(0,Be.Z)(this._searchAccounts,200),this.handleRowsChange=this.handleRowsChange.bind(this),this.balanceObjects=[]}shouldComponentUpdate(e,t){return!o().is(e.searchAccounts,this.props.searchAccounts)||t.searchTerm!==this.state.searchTerm||t.isLoading!==this.state.isLoading}_onSearchChange(e){this.setState({searchTerm:e.target.value.toLowerCase(),isLoading:!0}),this._searchAccounts(e.target.value)}_searchAccounts(e){Oe.Z.accountSearch(e),this.setState({isLoading:!1})}_onAddContact(e,t){t.preventDefault(),Oe.Z.addAccountContact(e),this.forceUpdate()}_onRemoveContact(e,t){t.preventDefault(),Oe.Z.removeAccountContact(e),this.forceUpdate()}handleRowsChange(e){this.setState({rowsOnPage:e}),this.forceUpdate()}_ensureBalanceObject(e){e&&"string"==typeof e&&(this.balanceObjects[e]||(this.balanceObjects[e]=parseFloat(m.ChainStore.getObject(e).get("balance")))),this.balanceObjects[e]||(this.balanceObjects[e]=0)}render(){let{searchAccounts:e}=this.props,{searchTerm:t}=this.state,a=[],s=[];return s=[{title:n.createElement(h(),{component:"span",content:"explorer.assets.id"}),dataIndex:"accountId",key:"accountId",defaultSortOrder:"ascend",sorter:(e,t)=>e.accountId>t.accountId?1:e.accountId<t.accountId?-1:0,render:e=>n.createElement("div",null,e)},{title:n.createElement(Ie.Z,{name:"user",title:"icons.user.account"}),dataIndex:"accountContacts",key:"accountContacts",render:(e,t)=>e.has(t.accountName)?n.createElement("div",{onClick:this._onRemoveContact.bind(this,t.accountName)},n.createElement(Ie.Z,{name:"minus-circle",title:"icons.minus_circle.remove_contact"})):n.createElement("div",{onClick:this._onAddContact.bind(this,t.accountName)},n.createElement(Ie.Z,{name:"plus-circle",title:"icons.plus_circle.add_contact"}))},{title:n.createElement(h(),{component:"span",content:"account.name"}),dataIndex:"accountName",key:"accountName",sorter:(e,t)=>e.accountName>t.accountName?1:e.accountName<t.accountName?-1:0,render:e=>n.createElement("div",null,n.createElement(q.rU,{to:`/account/${e}/overview`},e))},{title:n.createElement(h(),{component:"span",content:"gateway.balance"}),dataIndex:"accountBalance",key:"accountBalance",sorter:(e,t)=>(this._ensureBalanceObject(e.accountBalance),this._ensureBalanceObject(t.accountBalance),this.balanceObjects[e.accountBalance]>this.balanceObjects[t.accountBalance]?1:this.balanceObjects[e.accountBalance]<this.balanceObjects[t.accountBalance]?-1:0),render:e=>n.createElement("div",null,e?n.createElement(Te.Z,{balance:e}):"n/a")},{title:n.createElement(h(),{component:"span",content:"account.percent"}),dataIndex:"accountBalance",key:"accountBalancePercentage",sorter:(e,t)=>(this._ensureBalanceObject(e.accountBalance),this._ensureBalanceObject(t.accountBalance),this.balanceObjects[e.accountBalance]>this.balanceObjects[t.accountBalance]?1:this.balanceObjects[e.accountBalance]<this.balanceObjects[t.accountBalance]?-1:0),render:e=>n.createElement("div",null,e?n.createElement(Te.Z,{balance:e,asPercentage:!0}):"n/a")}],e.size>0&&t&&t.length>0&&e.filter((e=>-1!==e.indexOf(t))).sort(((e,t)=>e>t?1:e<t?-1:0)).map(((e,t)=>{let n=m.ChainStore.getAccount(t.toLowerCase()),s=n&&n.getIn(["balances","1.3.0"])||null;a.push({accountId:t,accountContacts:Ne.Z.getState().accountContacts,accountName:e,accountBalance:s})})),n.createElement("div",{className:"grid-block vertical"},n.createElement("div",{className:"grid-block vertical"},n.createElement("div",{className:"grid-block main-content small-12 medium-10 medium-offset-1 main-content vertical"},n.createElement("div",{className:"generic-bordered-box"},n.createElement("div",{style:{textAlign:"left",marginBottom:"24px"}},n.createElement(v.Z,{placeholder:"Search",value:this.state.searchTerm,style:{width:"200px"},onChange:this._onSearchChange.bind(this)}),n.createElement(y.Select,{style:{width:"150px",marginLeft:"24px"},value:this.state.rowsOnPage,onChange:this.handleRowsChange},n.createElement(y.Select.Option,{key:"10"},"10 rows"),n.createElement(y.Select.Option,{key:"25"},"25 rows"),n.createElement(y.Select.Option,{key:"50"},"50 rows"),n.createElement(y.Select.Option,{key:"100"},"100 rows"),n.createElement(y.Select.Option,{key:"200"},"200 rows")),n.createElement("div",{style:{display:"inline-block",marginLeft:"24px"}},this.state.searchTerm&&0==this.state.searchTerm.length?n.createElement(h(),{content:"account.start_typing_to_search"}):null)),n.createElement(y.Table,{style:{width:"100%",marginTop:"16px"},rowKey:"accountId",columns:s,dataSource:a,pagination:{position:"bottom",pageSize:Number(this.state.rowsOnPage)}}),this.state.isLoading?n.createElement("div",{style:{textAlign:"center",padding:10}},n.createElement(je.Z,{type:"three-bounce"})):null))))}}De.defaultProps={searchAccounts:{}},De.propTypes={searchAccounts:be().object.isRequired};const Le=De;class Fe extends n.Component{render(){return n.createElement(T.Z,{stores:[Ne.Z],inject:{searchAccounts:()=>Ne.Z.getState().searchAccounts,searchTerm:()=>Ne.Z.getState().searchTerm}},n.createElement(Le,null))}}const Me=Fe;var Re=a(12326),Pe=a(95894);class Ue extends n.Component{constructor(){super(),this.state={height:null},this._setDimensions=this._setDimensions.bind(this)}UNSAFE_componentWillMount(){window.addEventListener("resize",this._setDimensions,{capture:!1,passive:!0})}componentDidMount(){this._setDimensions()}componentWillUnmount(){window.removeEventListener("resize",this._setDimensions)}_setDimensions(){let e=this.refs.wrapper.offsetHeight;e!==this.state.height&&this.setState({height:e})}render(){return n.createElement("div",{ref:"wrapper",className:"grid-block no-overflow"},n.createElement(Pe.Z,{style:{width:"100%",padding:20},listHeight:this.state.height?this.state.height:null,className:"no-overflow",headerStyle:{paddingTop:0,borderTop:"none"},tabHeader:!0,columns:[{name:"star",index:1},{name:"market",index:2},{name:"quoteSupply",index:3},{name:"vol",index:4},{name:"price",index:5},{name:"change",index:6}]}))}}const ze=Ue;class We extends n.Component{render(){return n.createElement(T.Z,{stores:[_.Z,ue.Z,Re.Z],inject:{starredMarkets:()=>_.Z.getState().starredMarkets,viewSettings:()=>_.Z.getState().viewSettings,lookupResults:()=>ue.Z.getState().lookupResults,marketBase:()=>Re.Z.getState().marketBase}},n.createElement(ze,null))}}const Ve=We;class He extends n.Component{constructor(e){super(e),this.state={tabs:[{name:"blocks",link:"/explorer/blocks",translate:"explorer.blocks.title",content:he},{name:"assets",link:"/explorer/assets",translate:"explorer.assets.title",content:Ze},{name:"accounts",link:"/explorer/accounts",translate:"explorer.accounts.title",content:Me},{name:"witnesses",link:"/explorer/witnesses",translate:"explorer.witnesses.title",content:Z},{name:"committee_members",link:"/explorer/committee-members",translate:"explorer.committee_members.title",content:I},{name:"markets",link:"/explorer/markets",translate:"markets.title",content:Ve},{name:"fees",link:"/explorer/fees",translate:"fees.title",content:V}]}}render(){return n.createElement(y.Tabs,{activeKey:this.props.location.pathname,animated:!1,style:{display:"table",height:"100%",width:"100%"},onChange:e=>{this.props.history.push(e)}},this.state.tabs.map((e=>{const t=e.content;return n.createElement(y.Tabs.TabPane,{key:e.link,tab:r().translate(e.translate)},n.createElement("div",{className:"padding"},n.createElement(t,null)))})))}}const qe=He},57906:(e,t,a)=>{a.d(t,{Z:()=>i});var n=a(67294),s=a(13973),r=a(45697),l=a.n(r);class o extends n.Component{static propTypes={scroll_length:l().number};static defaultProps={scroll_length:9};constructor(e){e.scroll_length,super(e),this.state={active:!1},this.listener=!1,this.onBodyClick=this.onBodyClick.bind(this)}componentDidMount(){this._setListener()}shouldComponentUpdate(e,t){return!s.Z.are_equal_shallow(e.entries,this.props.entries)||!s.Z.are_equal_shallow(t,this.state)||e.value!==this.props.value}_setListener(e=this.props){e.entries.length>1&&!this.listener&&(this.listener=!0,document.body.addEventListener("click",this.onBodyClick,{capture:!1,passive:!0}))}_removeListener(){document.body.removeEventListener("click",this.onBodyClick),this.listener=!1}UNSAFE_componentWillReceiveProps(e){1===e.entries.length?this._removeListener():e.entries.length>1&&this._setListener(e)}componentWillUnmount(){this._removeListener()}onBodyClick(e){let t=e.target,a=!1;do{if(t.classList&&t.classList.contains("dropdown")&&t.id===this.props.id){a=!0;break}}while(t=t.parentNode);a?e.stopPropagation():this.setState({active:!1})}onChange(e,t){t.preventDefault(),t.stopPropagation(),this.props.onChange(e),this.setState({active:!1})}_toggleDropdown(){this.setState({active:!this.state.active})}render(){const{entries:e,value:t}=this.props;let{active:a}=this.state;if(0===e.length)return null;if(1==e.length)return n.createElement("div",{className:"dropdown-wrapper inactive"+(this.props.upperCase?" upper-case":"")},n.createElement("div",null,this.props.singleEntry?this.props.singleEntry:e[0]));{let s=e.map((e=>n.createElement("li",{className:this.props.upperCase?"upper-case":"",key:e,onClick:this.onChange.bind(this,this.props.values[e])},n.createElement("span",null,e))));return n.createElement("div",{onClick:this._toggleDropdown.bind(this),className:"dropdown-wrapper"+(a?" active":"")+(this.props.upperCase?" upper-case":"")},n.createElement("div",{style:{paddingRight:15}},t||n.createElement("span",{className:"hidden"},"A")),n.createElement("ul",{className:"dropdown",style:{overflow:e.length>this.props.scroll_length?"auto":"hidden"}},s))}}}const i=o},19305:(e,t,a)=>{a.d(t,{Z:()=>i});var n=a(67294),s=a(23037),r=a(82267),l=a(3841);class o extends n.Component{static propTypes={witness:s.Z.ChainObject.isRequired};render(){let e=this.props.witness.get("witness_account");return n.createElement(l.Z,{account:e})}}const i=o=(0,r.Z)(o)},88464:(e,t,a)=>{a.r(t)}}]);